"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[765],{9765:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(9439),a=n(2791),l="Chat_messages__efd-3",i=n(8687),s=n(2140),o=n(7689),c=n(1087),u=n(4942),d=n(1694),v=n.n(d),p=n(5501);function m(e){return["small","middle","large"].includes(e)}function f(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var x=n(1929),g=n(11),h=a.createContext({latestIndex:0}),y=h.Provider,j=function(e){var t=e.className,n=e.index,r=e.children,l=e.split,i=e.style,s=a.useContext(h).latestIndex;return null===r||void 0===r?null:a.createElement(a.Fragment,null,a.createElement("div",{className:t,style:i},r),n<s&&l&&a.createElement("span",{className:"".concat(t,"-split")},l))},b=n(1294),N=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},w=a.forwardRef((function(e,t){var n,l,i,s=a.useContext(x.E_),o=s.getPrefixCls,c=s.space,d=s.direction,g=e.size,h=void 0===g?(null===c||void 0===c?void 0:c.size)||"small":g,w=e.align,C=e.className,O=e.rootClassName,Z=e.children,E=e.direction,k=void 0===E?"horizontal":E,I=e.prefixCls,P=e.split,z=e.style,F=e.wrap,S=void 0!==F&&F,R=e.classNames,W=e.styles,_=N(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),H=Array.isArray(h)?h:[h,h],L=(0,r.Z)(H,2),M=L[0],T=L[1],A=m(T),G=m(M),V=f(T),D=f(M),J=(0,p.Z)(Z,{keepEmpty:!0}),q=void 0===w&&"horizontal"===k?"center":w,B=o("space",I),K=(0,b.Z)(B),Q=(0,r.Z)(K,2),U=Q[0],X=Q[1],Y=v()(B,null===c||void 0===c?void 0:c.className,X,"".concat(B,"-").concat(k),(n={},(0,u.Z)(n,"".concat(B,"-rtl"),"rtl"===d),(0,u.Z)(n,"".concat(B,"-align-").concat(q),q),(0,u.Z)(n,"".concat(B,"-gap-row-").concat(T),A),(0,u.Z)(n,"".concat(B,"-gap-col-").concat(M),G),n),C,O),$=v()("".concat(B,"-item"),null!==(l=null===R||void 0===R?void 0:R.item)&&void 0!==l?l:null===(i=null===c||void 0===c?void 0:c.classNames)||void 0===i?void 0:i.item),ee=0,te=J.map((function(e,t){var n,r;null!==e&&void 0!==e&&(ee=t);var l=e&&e.key||"".concat($,"-").concat(t);return a.createElement(j,{className:$,key:l,index:t,split:P,style:null!==(n=null===W||void 0===W?void 0:W.item)&&void 0!==n?n:null===(r=null===c||void 0===c?void 0:c.styles)||void 0===r?void 0:r.item},e)})),ne=a.useMemo((function(){return{latestIndex:ee}}),[ee]);if(0===J.length)return null;var re={};return S&&(re.flexWrap="wrap"),!G&&D&&(re.columnGap=M),!A&&V&&(re.rowGap=T),U(a.createElement("div",Object.assign({ref:t,className:Y,style:Object.assign(Object.assign(Object.assign({},re),null===c||void 0===c?void 0:c.style),z)},_),a.createElement(y,{value:ne},te)))}));var C=w;C.Compact=g.ZP;var O=C,Z=n(668),E=n(462),k=n(6883),I=n(184),P=n(5045),z=function(){var e=(0,a.useState)(""),t=(0,r.Z)(e,2),n=t[0],l=t[1],o=(0,i.I0)(),c=(0,i.v9)((function(e){return e.chat.status}));return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("div",{style:{maxWidth:"700px"},children:(0,I.jsxs)(O.Compact,{style:{width:"100%",padding:"8px 8px 8px 0 ",margin:"4px"},children:[(0,I.jsx)(Z.Z,{defaultValue:"",value:n,onChange:function(e){return l(e.currentTarget.value)}}),(0,I.jsx)(E.ZP,{type:"primary",disabled:"pending"===c||!navigator.onLine,onClick:function(){n&&(o((0,s.J)(n)),l(""))},children:"\u041e\u0422\u041f\u0420\u0410\u0412\u0418\u0422\u042c"})]})})})},F=function(){var e=(0,i.v9)((function(e){return e.chat.messages})),t=(0,a.useRef)(null),n=(0,a.useState)(!0),s=(0,r.Z)(n,2),o=s[0],c=s[1];return(0,a.useEffect)((function(){var e;o&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"auto"}))}),[e,o]),(0,I.jsxs)("div",{style:{overflow:"auto",maxHeight:"700px",maxWidth:"700px"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?c(!0):c(!1)},className:l,children:[e.map((function(e,t){return(0,I.jsx)(S,{message:e},t)})),(0,I.jsx)("div",{ref:t})]})},S=a.memo((function(e){var t=e.message;return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"row",color:"aliceblue",background:"#212121",padding:"8px",margin:"4px",borderRadius:"16px"},children:[(0,I.jsx)("div",{children:(0,I.jsx)(c.OL,{to:"/profile/"+t.userId,children:(0,I.jsx)("img",{src:t.photo||P,style:{borderRadius:"50%"},alt:"avatar",height:"50px",width:"50px"})})}),(0,I.jsx)("div",{style:{alignSelf:"center",marginLeft:"10px",fontFamily:"Montserrat"},children:t.message})]})})})),R=function(){var e=(0,i.I0)();return(0,a.useEffect)((function(){return e((0,s.bv)()),function(){e((0,s.pz)())}}),[e]),(0,i.v9)(k.W)?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(F,{}),(0,I.jsx)(z,{})]}):(0,I.jsx)(o.Fg,{to:"/login"})}}}]);
//# sourceMappingURL=765.c25e401d.chunk.js.map